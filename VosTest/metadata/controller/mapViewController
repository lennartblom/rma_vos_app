{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "mapViewController"
    },
    "name": "MyController",
    "designerId": "740bac9a-5737-4f50-9cde-6f7badcaa37d",
    "cn": [
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "button#scoreButton1",
                "designer|targetType": "Ext.Button",
                "fn": "onButtonTap",
                "implHandler": [
                    "console.log(\"Zur√ºck\");",
                    "this.getMapView().hide();",
                    "this.getAchView().show({type:\"slide\",direction:\"right\"});"
                ],
                "name": "tap"
            },
            "name": "onButtonTap",
            "designerId": "dd567715-6384-4ce0-98c7-31e11c061083"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "achView",
                "selector": "#AchView"
            },
            "name": "achView",
            "designerId": "54317ad6-8b63-4cf5-9778-b56372620a0b"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "mapView",
                "selector": "#MapView"
            },
            "name": "mapView",
            "designerId": "20c7f713-3bd5-40c5-96fb-cdd5ff14681b"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "map#mymap",
                "designer|targetType": "Ext.Map",
                "fn": "onMapMaprender",
                "implHandler": [
                    "var osnabrueck = new google.maps.LatLng(52.2725392927, 8.0486774787);",
                    "",
                    "gmap.panTo(osnabrueck);",
                    "",
                    "console.log(\"Pan to OS\");",
                    "",
                    "Ext.getStore('stops').load({",
                    "        callback : function(){",
                    "            var redstation = new google.maps.MarkerImage(\"resources/images/icons/red_station.png\", null, null, null, new google.maps.Size(25,25));",
                    "            var greenstation = new google.maps.MarkerImage(\"resources/images/icons/green_station.png\", null, null, null, new google.maps.Size(25,25));",
                    "            var total = this.getCount();",
                    "            var visited = 0;",
                    "            var notVisited = 0;",
                    "",
                    "            for(i = 0; i< total; i++){",
                    "                var stopPosition =  new google.maps.LatLng(this.getData().getAt(i).get('lat'), this.getData().getAt(i).get('long'));",
                    "",
                    "                if(this.getData().getAt(i).get('visited')==='true'){",
                    "                    icon = greenstation;",
                    "                    visited++;",
                    "                } else {",
                    "                    icon = redstation;",
                    "                    notVisited++;",
                    "                }",
                    "",
                    "                var marker = new google.maps.Marker({",
                    "                    position: stopPosition,",
                    "                    map: gmap,",
                    "                    title: this.getData().getAt(i).get('name'),",
                    "                    icon: icon",
                    "                });",
                    "            }",
                    "            console.log(\"Du hast bereits \"+ Math.round(visited/(total/100)) + \"% des Busnetztes besucht...\");",
                    "        }",
                    "    }",
                    ");",
                    "",
                    "console.log(\"Daten abgeholt\");",
                    "console.log(\"Marker gesetzt.\");",
                    "",
                    "",
                    ""
                ],
                "name": "maprender"
            },
            "name": "onMapMaprender",
            "designerId": "dcacbdb5-41e3-47cf-8758-37dc1015e819"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "Percent",
                "selector": "label#Percent"
            },
            "name": "Percent",
            "designerId": "538acf34-f29d-4854-b292-ce1e042ef93f"
        }
    ]
}