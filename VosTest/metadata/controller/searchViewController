{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "searchViewController"
    },
    "name": "MyController",
    "designerId": "5c080c39-9eb0-4ca3-80d0-df77e879fed0",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "searchResultList",
                "selector": "list#searchResultList"
            },
            "name": "searchResultList",
            "designerId": "ddd4c0c7-6c12-4936-a834-476edbb97b39"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "searchField",
                "selector": "searchfield#searchField"
            },
            "name": "searchField",
            "designerId": "cc074c7f-4043-4a7c-b870-9c615a9c07c6"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "searchfield#searchField",
                "designer|targetType": "Ext.field.Search",
                "fn": "onSearchfieldKeyup",
                "implHandler": [
                    "var value = this.getSearchField().getValue();",
                    "var store = Ext.getStore('stops');",
                    "var dataView = this.getSearchResultList();",
                    "",
                    "if(value === ''){",
                    "    console.log('String ist leer. Filter wird geleert.');",
                    "    store.clearFilter();",
                    "} else {",
                    "    console.log(\"Search refresh with: \"+value);",
                    "    store.filter('name', value);",
                    "}",
                    "",
                    "dataView.refresh();",
                    ""
                ],
                "name": "keyup"
            },
            "name": "onSearchfieldKeyup",
            "designerId": "c3e0a80a-bb7a-40e5-acc7-cd1e9d4504c8"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "list#searchResultList",
                "designer|targetType": "Ext.dataview.List",
                "fn": "onListItemTap",
                "implHandler": [
                    "var dataView;",
                    "console.log(\"Seachtype: \" + this.getSearchType());",
                    "if(this.getSearchType() === 'start'){",
                    "    dataView = this.getLineTwo();",
                    "}else if(this.getSearchType() === 'destination'){",
                    "    dataView = this.getLineThree();",
                    "}else{",
                    "    console.log(\"Search Type?!?!?\");",
                    "    return -1;",
                    "}",
                    "",
                    "var linesData = record.get('lines');",
                    "//var quantity = linesArray.getCount();",
                    "",
                    "",
                    "",
                    "var myPanel = Ext.create('Ext.Panel', {",
                    "    html: \"<div class=\\\"buslineWrapper\\\"><div class=\\\"buslinesBoxLeft\\\"><div class=\\\"busIcon\\\" stlye=\\\"background-image:url(resources/images/icons/bus-icon-150x150.png)\\\"></div> \" + this.getApplication().getController('Fahrplaner').getLines(linesData) + \"</div><div class=\\\"buslinesBoxRight\\\">\"+ record.get('name')+ \"</div><div class=\\\"clearing\\\"></div></div>\"",
                    "});",
                    "",
                    "dataView.removeAll();",
                    "dataView.add([myPanel]);",
                    "",
                    "var store = Ext.getStore('stops');",
                    "store.clearFilter();",
                    "",
                    "this.getSearchResultList().refresh();",
                    "",
                    "this.getSearchView().hide();",
                    "this.getFahrplanerView().show({type:\"slide\",direction:\"down\"});"
                ],
                "name": "itemtap"
            },
            "name": "onListItemTap",
            "designerId": "05357f84-920d-43e7-a198-f96d0dfea636"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "searchView",
                "selector": "#searchView"
            },
            "name": "searchView",
            "designerId": "55f3d523-80c7-4a75-be32-267797c247e7"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "FahrplanerView",
                "selector": "#FahrplanerView"
            },
            "name": "FahrplanerView",
            "designerId": "d0a0e593-759c-4914-a6d2-95ce707ab8d5"
        },
        {
            "type": "controlleraction",
            "reference": {
                "name": "listeners",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|controlQuery": "list#searchResultList",
                "designer|targetType": "Ext.dataview.List",
                "fn": "onListPainted",
                "implHandler": [
                    ""
                ],
                "name": "painted"
            },
            "name": "onListPainted",
            "designerId": "251e230f-1dbe-40ec-bbe8-4de64c242437"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "lineTwo",
                "selector": "dataview#lineTwo"
            },
            "name": "lineTwo",
            "designerId": "405e2e82-cec4-40df-9726-9a59c9c2e8d2"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "lineThree",
                "selector": "dataview#lineThree"
            },
            "name": "lineThree",
            "designerId": "bbc54c7b-9948-4567-b201-252107e76c2d"
        },
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "application"
                ],
                "fn": "init",
                "implHandler": [
                    "this.searchType = \"\";"
                ]
            },
            "name": "init",
            "designerId": "5dd25ab0-f22d-430c-9538-62af1b736a7f"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "name"
                ],
                "fn": "setSearchType",
                "implHandler": [
                    "this.searchType = name;",
                    "console.log(\"SearchType wurde neu gesetzt\");"
                ]
            },
            "name": "setSearchType",
            "designerId": "a35c0795-55c3-41dd-8612-2e2e4f5c7ce7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "getSearchType",
                "implHandler": [
                    "return this.searchType;"
                ]
            },
            "name": "getSearchType",
            "designerId": "62f159b6-c3e4-40fd-b1e6-3dddc6536b06"
        }
    ]
}